(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1485:function(e,t,n){"use strict";var a=function(){var e=[{kind:"LocalArgument",name:"input",type:"SetUsernameInput!",defaultValue:null}],t=[{kind:"Variable",name:"input",variableName:"input"}],n={kind:"ScalarField",alias:null,name:"username",args:null,storageKey:null},a={kind:"LinkedField",alias:null,name:"errors",storageKey:null,args:null,concreteType:"CustomError",plural:!0,selections:[{kind:"ScalarField",alias:null,name:"code",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"message",args:null,storageKey:null}]};return{kind:"Request",fragment:{kind:"Fragment",name:"SetUsernameMutation",type:"Mutation",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"setUsername",storageKey:null,args:t,concreteType:"SetUsernamePayload",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[n]},a]}]},operation:{kind:"Operation",name:"SetUsernameMutation",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"setUsername",storageKey:null,args:t,concreteType:"SetUsernamePayload",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[n,{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]},a]}]},params:{operationKind:"mutation",name:"SetUsernameMutation",id:null,text:"mutation SetUsernameMutation(\n  $input: SetUsernameInput!\n) {\n  setUsername(input: $input) {\n    user {\n      username\n      id\n    }\n    errors {\n      code\n      message\n    }\n  }\n}\n",metadata:{}}}}();a.hash="a95b117f38856beed2d5f098125f7fc3",e.exports=a},1486:function(e,t,n){"use strict";var a=n(10),r=n.n(a),i=n(22),s=n(14),l=function(){var e=Object(i.a)(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(s.Q,{method:"POST",headers:new Headers({"X-Gladly-Requested-By":"tab-web-nextjs","Content-Type":"application/json"}),credentials:"include",body:JSON.stringify({optIn:!0})});case 3:if((t=e.sent).ok){e.next=6;break}throw new Error(t.statusText);case 6:return e.next=8,t.json();case 8:e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}},e,null,[[0,10]])}));return function(){return e.apply(this,arguments)}}();t.a=l},1487:function(e,t,n){"use strict";var a=n(86),r=n.n(a),i=n(48),s=function(){return n(1488)};t.a=function(e){return r()(i.a,{mutation:s,variables:{input:e}})}},1488:function(e,t,n){"use strict";var a=function(){var e=[{kind:"LocalArgument",name:"input",type:"SetV4BetaInput!",defaultValue:null}],t=[{kind:"Variable",name:"input",variableName:"input"}],n={kind:"ScalarField",alias:null,name:"v4BetaEnabled",args:null,storageKey:null};return{kind:"Request",fragment:{kind:"Fragment",name:"SetV4BetaMutation",type:"Mutation",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"setV4Beta",storageKey:null,args:t,concreteType:"SetV4BetaPayload",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[n]}]}]},operation:{kind:"Operation",name:"SetV4BetaMutation",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"setV4Beta",storageKey:null,args:t,concreteType:"SetV4BetaPayload",plural:!1,selections:[{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:null,concreteType:"User",plural:!1,selections:[n,{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null}]}]}]},params:{operationKind:"mutation",name:"SetV4BetaMutation",id:null,text:"mutation SetV4BetaMutation(\n  $input: SetV4BetaInput!\n) {\n  setV4Beta(input: $input) {\n    user {\n      v4BetaEnabled\n      id\n    }\n  }\n}\n",metadata:{}}}}();a.hash="83b98a0cc4c086d1da917a9524fa50d9",e.exports=a},1510:function(e,t,n){"use strict";var a=n(5),r=n(8),i=n(7),s=n(4),l=n(6),o=n(0),u=n.n(o),c=n(35),d=n.n(c),m=n(104),p=n.n(m),g=n(48),A=n(77),f=n(304),h=n.n(f),b=n(43),y=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(i.a)(this,Object(s.a)(t).call(this,e))).inputElem=null,n.state={username:null,validationErrorMessage:null},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"hasValue",value:function(){return!!(this.inputElem&&this.inputElem.value&&this.inputElem.value.trim())}},{key:"getValue",value:function(){return this.hasValue()?this.inputElem.value.trim():null}},{key:"setErrorMessage",value:function(e){this.setState({validationErrorMessage:e})}},{key:"validate",value:function(){if(this.hasValue()){var e=this.inputElem.value.trim(),t=Object(b.j)(e),n=t.isValid,a=t.reason;if(n)this.setErrorMessage(null);else switch(a){case"TOO_SHORT":this.setErrorMessage("Must be at least two characters.");break;case"TOO_LONG":this.setErrorMessage("Must be shorter than 30 characters.");break;case"NO_SPACES":this.setErrorMessage("Cannot contain spaces.");break;case"NO_AT_SIGN":this.setErrorMessage('Should not contain "@".');break;default:this.setErrorMessage("Username is invalid.")}return n}return this.setErrorMessage("Must be at least two characters."),!1}},{key:"render",value:function(){var e=this,t=this.props,n=t.usernameDuplicate,a=t.otherError,r=Object(A.a)(t,["usernameDuplicate","otherError"]),i=this.state.validationErrorMessage,s=n?"Username is already taken. Please choose another.":a?"There was an error saving your username. Please try again later.":i;return u.a.createElement(h.a,Object.assign({id:"username-input","data-test-id":"username-field-text-input",inputRef:function(t){e.inputElem=t}},r,{error:!!s,helperText:s}))}}]),t}(u.a.Component);y.defaultProps={usernameDuplicate:!1,otherError:!1};var v=y,k=n(15),E=function(){return n(1485)};var O=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){};return Object(k.commitMutation)(e,{mutation:E,variables:{input:{userId:t,username:n}},onCompleted:a,onError:r})},x=n(57),j=n(228),S=n(17),I=n(1),C=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(i.a)(this,Object(s.a)(t).call(this,e))).usernameFieldRef=null,n.state={usernameDuplicate:!1,otherError:!1,savingUsernameInProgress:!1},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){Object(j.a)()}},{key:"submit",value:function(e){var t=this.usernameFieldRef.validate(),n=this.usernameFieldRef.getValue();this.setState({usernameDuplicate:!1,otherError:!1}),t&&(this.setState({savingUsernameInProgress:!0}),O(g.a,this.props.user.id,n,this.onMutationCompleted.bind(this),this.onMutationError.bind(this)))}},{key:"onMutationCompleted",value:function(e){var t=this,n=this.props.onCompleted;this.setState({savingUsernameInProgress:!1});var a=e.setUsername;a.user?(Object(x.i)(a.user.username),n()):a.errors.forEach(function(e){"USERNAME_DUPLICATE"===e.code?t.setState({usernameDuplicate:!0}):t.setState({otherError:!0})})}},{key:"onMutationError",value:function(e){console.error("Error saving username:"),S.a.error(e),this.setState({savingUsernameInProgress:!1,otherError:!0})}},{key:"handleKeyPress",value:function(e){this.state.savingUsernameInProgress||"Enter"===e.key&&this.submit()}},{key:"render",value:function(){var e=this,t=this.props.app;return u.a.createElement(p.a,{elevation:1,style:{padding:24,backgroundColor:"#FFF"}},u.a.createElement("span",{style:{fontSize:20,fontWeight:500}},"Choose a username"),u.a.createElement(v,{"data-test-id":"enter-username-form-username-field",ref:function(t){e.usernameFieldRef=t},usernameDuplicate:this.state.usernameDuplicate,otherError:this.state.otherError,onKeyPress:this.handleKeyPress.bind(this),label:"Username for ".concat(t===I.i?"Search for a Cause":"Tab for a Cause"),style:{display:"block",width:280,minHeight:84,marginTop:20},fullWidth:!0,autoFocus:!0}),u.a.createElement("span",{style:{display:"flex",justifyContent:"flex-end",marginTop:4}},u.a.createElement(d.a,{"data-test-id":"enter-username-form-button",color:"primary",variant:"contained",disabled:this.state.savingUsernameInProgress,onClick:this.submit.bind(this),style:{minWidth:96}},this.state.savingUsernameInProgress?"Saving...":"Next")))}}]),t}(u.a.Component);C.defaultProps={app:I.db};t.a=C},1565:function(e,t,n){"use strict";var a=function(){var e=[{kind:"LocalArgument",name:"input",type:"MergeIntoExistingUserInput!",defaultValue:null}],t=[{kind:"LinkedField",alias:null,name:"mergeIntoExistingUser",storageKey:null,args:[{kind:"Variable",name:"input",variableName:"input"}],concreteType:"MergeIntoExistingUserPayload",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"success",args:null,storageKey:null}]}];return{kind:"Request",fragment:{kind:"Fragment",name:"MergeIntoExistingUserMutation",type:"Mutation",metadata:null,argumentDefinitions:e,selections:t},operation:{kind:"Operation",name:"MergeIntoExistingUserMutation",argumentDefinitions:e,selections:t},params:{operationKind:"mutation",name:"MergeIntoExistingUserMutation",id:null,text:"mutation MergeIntoExistingUserMutation(\n  $input: MergeIntoExistingUserInput!\n) {\n  mergeIntoExistingUser(input: $input) {\n    success\n  }\n}\n",metadata:{}}}}();a.hash="cecbd441c4acbc6b520cdc92edc5d7c4",e.exports=a},1566:function(e,t){e.exports="data:image/png;base64,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"},1567:function(e,t,n){"use strict";var a={kind:"Fragment",name:"AuthenticationContainer_user",type:"User",metadata:null,argumentDefinitions:[],selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"email",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"username",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"v4BetaEnabled",args:null,storageKey:null},{kind:"FragmentSpread",name:"AssignExperimentGroupsContainer_user",args:null}],hash:"e49471bd435323a49292cf4ece29b64a"};e.exports=a},1568:function(e,t,n){"use strict";var a=function(){var e=[{kind:"LocalArgument",name:"userId",type:"String!",defaultValue:null}],t=[{kind:"Variable",name:"userId",variableName:"userId"}];return{kind:"Request",fragment:{kind:"Fragment",name:"AuthenticationViewQuery",type:"Query",metadata:null,argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:t,concreteType:"User",plural:!1,selections:[{kind:"FragmentSpread",name:"AuthenticationContainer_user",args:null}]}]},operation:{kind:"Operation",name:"AuthenticationViewQuery",argumentDefinitions:e,selections:[{kind:"LinkedField",alias:null,name:"user",storageKey:null,args:t,concreteType:"User",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"email",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"username",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"v4BetaEnabled",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"joined",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"numUsersRecruited",args:null,storageKey:null}]}]},params:{operationKind:"query",name:"AuthenticationViewQuery",id:null,text:"query AuthenticationViewQuery(\n  $userId: String!\n) {\n  user(userId: $userId) {\n    ...AuthenticationContainer_user\n    id\n  }\n}\n\nfragment AuthenticationContainer_user on User {\n  id\n  email\n  username\n  v4BetaEnabled\n  ...AssignExperimentGroupsContainer_user\n}\n\nfragment AssignExperimentGroupsContainer_user on User {\n  id\n  joined\n  numUsersRecruited\n}\n",metadata:{}}}}();a.hash="8eb1f773649b756f546ceeeb231c6536",e.exports=a},1787:function(e,t,n){"use strict";n.r(t);var a=n(5),r=n(8),i=n(7),s=n(4),l=n(6),o=n(0),u=n.n(o),c=n(12),d=n(574),m=n(15),p=n(10),g=n.n(p),A=n(22),f=n(302),h=n(104),b=n.n(h),y=n(25),v=n(16),k=n.n(v),E=n(1554),O=n.n(E),x=n(101),j=n(197),S=n(149),I=(n(576),n(1555)),C=n(228),w=function(e){function t(){return Object(a.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){Object(C.a)()}},{key:"render",value:function(){return null}}]),t}(u.a.Component);w.defaultProps={};var U=w,R=n(14),P=n(299),F=n(17),D=n(48),B=function(){return n(1565)};var T=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};return Object(m.commitMutation)(e,{mutation:B,variables:{input:{userId:t}},onCompleted:n,onError:a})},M=n(1),Q=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(i.a)(this,Object(s.a)(t).call(this,e))).configureFirebaseUI(),n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentWillUnmount",value:function(){this.removeButtonClickListeners()}},{key:"socialButtonClicked",value:function(e){Object(P.d)(),Object(P.f)()}},{key:"emailButtonClicked",value:function(e){Object(P.d)(),Object(P.e)()}},{key:"getElementByClassNamePolling",value:function(){var e=Object(A.a)(g.a.mark(function e(t){var n,a,r,i,s,l;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=function(e){return new Promise(function(t){return setTimeout(t,e)})},n=function(){return document.getElementsByClassName(t)},r=[],i=10,s=100,l=0;case 6:if(!(l<i)){e.next=15;break}if(!(r=n()).length){e.next=10;break}return e.abrupt("return",r[0]);case 10:return l+=1,e.next=13,a(s);case 13:e.next=6;break;case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"addButtonClickListeners",value:function(){var e=Object(A.a)(g.a.mark(function e(){var t,n,a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getElementByClassNamePolling("firebaseui-idp-button firebaseui-idp-facebook");case 2:return(t=e.sent)&&t.addEventListener("click",this.socialButtonClicked),e.next=6,this.getElementByClassNamePolling("firebaseui-idp-button firebaseui-idp-google");case 6:return(n=e.sent)&&n.addEventListener("click",this.socialButtonClicked),e.next=10,this.getElementByClassNamePolling("firebaseui-idp-button firebaseui-idp-password");case 10:(a=e.sent)&&a.addEventListener("click",this.emailButtonClicked);case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"removeButtonClickListeners",value:function(){var e=Object(A.a)(g.a.mark(function e(){var t,n,a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getElementByClassNamePolling("firebaseui-idp-button firebaseui-idp-facebook");case 2:return(t=e.sent)&&t.removeEventListener("click",this.socialButtonClicked),e.next=6,this.getElementByClassNamePolling("firebaseui-idp-button firebaseui-idp-google");case 6:return(n=e.sent)&&n.removeEventListener("click",this.socialButtonClicked),e.next=10,this.getElementByClassNamePolling("firebaseui-idp-button firebaseui-idp-password");case 10:(a=e.sent)&&a.removeEventListener("click",this.emailButtonClicked);case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"configureFirebaseUI",value:function(){var e=this,t=this.props.app;this.uiConfig={signInFlow:"popup",signInSuccessUrl:t===M.i?Object(R.g)(R.L,null,{absolute:!0}):Object(R.g)(R.h,null,{absolute:!0}),signInOptions:[{provider:S.a.auth.GoogleAuthProvider.PROVIDER_ID,scopes:["https://www.googleapis.com/auth/userinfo.email"]},{provider:S.a.auth.FacebookAuthProvider.PROVIDER_ID,scopes:["email"]},{provider:S.a.auth.EmailAuthProvider.PROVIDER_ID,requireDisplayName:!1},{provider:"apple.com"}],autoUpgradeAnonymousUsers:!0,callbacks:{signInSuccessWithAuthResult:function(t,n){return e.props.onSignInSuccess(t.user),!1},uiShown:function(){e.addButtonClickListeners()},signInFailure:function(t){if("firebaseui/anonymous-upgrade-merge-conflict"!==t.code){var n=S.a.auth().currentUser;return e.props.onSignInSuccess(n),Promise.resolve()}var a=S.a.auth().currentUser,r=t.credential;return new Promise(function(e,t){T(D.a,a.uid,function(){e()},function(t){F.a.error(t),e()})}).then(function(){return S.a.auth().signInAndRetrieveDataWithCredential(r)}).then(function(t){var n=t.user;return a.delete().catch(function(e){F.a.error(e)}).finally(function(){e.props.onSignInSuccess(n)})}).catch(function(e){F.a.error(e)})}},credentialHelper:"none",tosUrl:R.S,privacyPolicyUrl:R.I}}},{key:"render",value:function(){return u.a.createElement("span",null,u.a.createElement(I.FirebaseAuth,{uiConfig:this.uiConfig,firebaseAuth:S.a.auth()}),u.a.createElement(j.b,{exact:!0,path:"/newtab/auth/action/",component:U}))}}]),t}(u.a.Component);Q.defaultProps={app:M.db,onSignInSuccess:function(){}};var L=Q,N=n(35),W=n.n(N),Y=n(57),H=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(i.a)(this,Object(s.a)(t).call(this,e))).state={emailResent:!1,emailResendingInProgress:!1,emailResendingError:!1},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"resendEmailClick",value:function(){var e=Object(A.a)(g.a.mark(function e(t){var n;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({emailResendingInProgress:!0,emailResendingError:!1}),n=this.props.app,e.next=4,Object(Y.h)({continueURL:Object(R.g)(R.j,{app:n},{absolute:!0})});case 4:e.sent?this.setState({emailResent:!0,emailResendingInProgress:!1}):this.setState({emailResent:!1,emailResendingError:!0,emailResendingInProgress:!1});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"restartAuthFlow",value:function(){var e=Object(A.a)(g.a.mark(function e(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Y.e)();case 2:Object(R.q)(R.v,null,{keepURLParams:!0});case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.emailResendingInProgress,n=e.emailResent,a=e.emailResendingError;return u.a.createElement(b.a,{elevation:1,style:{padding:24,maxWidth:400,backgroundColor:"#FFF"}},u.a.createElement(k.a,{variant:"body1",style:{marginTop:8,marginBottom:36}},"Please check your email to verify your account."),u.a.createElement("span",{style:{display:"flex",justifyContent:"flex-end",marginTop:24}},u.a.createElement(W.a,{"data-test-id":"verify-email-message-cancel-button",color:"default",variant:"contained",onClick:this.restartAuthFlow.bind(this),style:{marginRight:8}},"Cancel"),u.a.createElement(W.a,{"data-test-id":"verify-email-message-resend-button",color:"default",variant:"contained",disabled:t||n||a,onClick:this.resendEmailClick.bind(this)},t?"Sending email...":n?"Email resent":a?"Error sending email":"Resend email")))}}]),t}(u.a.Component);H.defaultProps={app:M.db};var K=H,Z=n(1510),G=n(23),q=n(108),X=n(43),V=function(e){function t(){return Object(a.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.app,n=e.location,a=(n=void 0===n?{}:n).search,r=void 0===a?"":a,i=Object(X.h)(r),s="true"===i.mandatory;return u.a.createElement(b.a,{elevation:1,style:{padding:24,maxWidth:340,backgroundColor:"#FFF",marginBottom:60}},u.a.createElement(k.a,{variant:"h6",gutterBottom:!0},s?"Great job so far!":"Let's get started!"),s?u.a.createElement(k.a,{variant:"body2"},"You've already made a positive impact! Let's keep this progress safe: we ask you to sign in after a while so you don't lose access to your notes, bookmarks, and Hearts (even if you drop your computer in a puddle)."):u.a.createElement(k.a,{variant:"body2"},t===M.i?"Sign in to track your progress as you raise money for your favorite causes.":"Sign in to customize your new tab page and raise money for your favorite causes."),u.a.createElement("span",{style:{display:"flex",justifyContent:"flex-end",marginTop:24}},u.a.createElement(q.a,{to:Object(R.g)(R.v,Object(G.a)({},i),{absolute:!0}),target:"_top"},u.a.createElement(W.a,{"data-test-id":"sign-in-iframe-message-button",color:"primary",variant:"contained"},"Sign in"))))}}]),t}(u.a.Component);V.defaultProps={app:M.db};var J,z=V,_=function(e){function t(){return Object(a.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"restartAuthFlow",value:function(){var e=Object(A.a)(g.a.mark(function e(){return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Y.e)();case 2:Object(R.q)(R.v,null,{keepURLParams:!0});case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return u.a.createElement(b.a,{elevation:1,style:{padding:24,maxWidth:400,backgroundColor:"#FFF"}},u.a.createElement(k.a,{variant:"h6",gutterBottom:!0},"We couldn't sign you in"),u.a.createElement(k.a,{variant:"body2"},"This can happen when Facebook or Google doesn't have your email address on file, which we use to create your account. Please try signing in with another method, such as an email and password."),u.a.createElement("span",{style:{display:"flex",justifyContent:"flex-end",marginTop:24}},u.a.createElement(W.a,{"data-test-id":"missing-email-message-button",color:"primary",variant:"contained",onClick:this.restartAuthFlow.bind(this)},"Sign in using another method")))}}]),t}(u.a.Component),$=n(72),ee=n(311),te=n(1566),ne=n.n(te),ae=n(732),re=n.n(ae),ie=n(737),se=n(313),le=Object(G.a)({},se.a,{palette:Object(G.a)({},se.a.palette,{primary:{main:"#00b597",contrastText:"#fff"}})}),oe=n(1486),ue=n(36),ce=n(1487),de=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(i.a)(this,Object(s.a)(t).call(this,e))).state={loggedOutMessage:M.e.NONE},n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=Object(A.a)(g.a.mark(function e(){var t;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.navigateToAuthStep();case 2:(t=Object(ue.e)())===M.e.NONE&&Object(ue.n)(),this.setState({loggedOutMessage:t});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillReceiveProps",value:function(e){Object(x.isEqual)(e.authUser,this.props.authUser)||this.navigateToAuthStep()}},{key:"isAuthActionURL",value:function(){return-1!==this.props.location.pathname.indexOf("/auth/action/")}},{key:"getApp",value:function(){var e=this.props.location,t=Object(X.h)(e.search),n=null;try{var a=t.continueUrl;a&&(n=new URL(a).searchParams.get("app"))}catch(r){console.error(r)}return Object(X.i)(t.app||n)}},{key:"getNextURLIndex",value:function(){var e=this.props.location,t=Object(X.h)(e.search);return t.next?decodeURIComponent(t.next):0}},{key:"onAuthProcessCompleted",value:function(){var e=Object(A.a)(g.a.mark(function e(){var t,n,a,r,i;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.user,n=Object(c.get)(t,"v4BetaEnabled")||Object(ue.p)(),a=this.getNextURLIndex(),r=this.getApp()===M.i,i=Object(R.o)(a,{isSearchApp:r}),!n){e.next=17;break}return e.prev=6,e.next=9,Object(oe.a)();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),F.a.error(e.t0);case 14:if(Object(c.get)(t,"v4BetaEnabled")){e.next=17;break}return e.next=17,Object(ce.a)({userId:t.id,enabled:!0});case 17:Object($.a)(i);case 18:case"end":return e.stop()}},e,this,[[6,11]])}));return function(){return e.apply(this,arguments)}}()},{key:"navigateToAuthStep",value:function(){var e=Object(A.a)(g.a.mark(function e(){var t,n,a,r,i,s,l;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isAuthActionURL()){e.next=2;break}return e.abrupt("return");case 2:if(t=this.props,n=t.authUser,a=t.location,r=t.user,i=Object(X.h)(a.search),s=Object(C.d)({authUser:n,user:r,urlParams:{app:i.app,next:i.next,reauth:i.reauth,accountDeleted:i.accountDeleted}}),l="true"===i.noredirect||"true"===i.reauth,s||l){e.next=9;break}return e.next=9,this.onAuthProcessCompleted();case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onSignInSuccess",value:function(e){var t=this;if(Object(ue.a)(),e.email){var n=this.getApp();return Object(C.c)().then(function(){var a=Object(A.a)(g.a.mark(function a(r){return g.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e.emailVerified){a.next=4;break}Object(Y.h)({continueURL:Object(R.g)(R.j,{app:n,next:t.getNextURLIndex()},{absolute:!0})}).then(function(e){Object(R.q)(R.U,null,{keepURLParams:!0})}).catch(function(e){F.a.error(e)}),a.next=9;break;case 4:if(t.props.fetchUser(),"true"!==Object(X.e)().reauth){a.next=9;break}return a.next=9,t.onAuthProcessCompleted();case 9:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()).catch(function(e){F.a.error(e)})}Object(R.q)(R.G,null,{keepURLParams:!0})}},{key:"render",value:function(){var e=this,t=this.props,n=t.user,a=t.location,r=this.getApp(),i=se.a;switch(r){case M.db:i=se.a;break;case M.i:i=le;break;default:i=se.a}var s=Object(y.createMuiTheme)(i),l=Object(X.h)(a.search),o="true"===l.mandatory&&-1===a.pathname.indexOf(R.d);return u.a.createElement(y.MuiThemeProvider,{theme:s},u.a.createElement("span",{"data-test-id":"authentication-page",style:{display:"flex",flexDirection:"column",alignItems:"center",height:"100%",width:"100%",backgroundColor:"#FAFAFA"}},r===M.db?u.a.createElement(f.Helmet,null,u.a.createElement("title",null,"Sign in - Tab for a Cause"),u.a.createElement("link",{rel:"icon",href:re.a})):u.a.createElement(f.Helmet,null,u.a.createElement("title",null,"Sign in - Search for a Cause"),u.a.createElement("link",{rel:"icon",href:ne.a,key:"favicon"})),u.a.createElement("div",{style:{padding:"20px 40px",position:"absolute",top:0,left:0}},u.a.createElement(ee.a,{brand:r,includeText:!0,style:{height:40}})),u.a.createElement("span",{style:{display:"flex",flexDirection:"column",flex:1,alignSelf:"stretch",justifyContent:"center",alignItems:"center"}},u.a.createElement("span",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:20}},l.reauth?u.a.createElement(k.a,{style:{paddingBottom:10},variant:"h6"},u.a.createElement("span",null,"First, please login again.")):null,l.accountDeleted?u.a.createElement(k.a,{style:{paddingBottom:10},variant:"h6"},u.a.createElement("span",null,"Your account has been deleted.")):null,this.state.loggedOutMessage!==M.e.NONE?u.a.createElement("div",{"data-test-id":"logged-out-message",style:{backgroundColor:"rgb(255, 244, 229)",padding:"6px 16px",marginBottom:"6px"}},u.a.createElement(k.a,{variant:"body2",style:{display:"flex",alignItems:"center",justifyContent:"center",color:"rgb(102, 60, 0)"}},u.a.createElement(O.a,{style:{paddingRight:"6px",color:"rgb(102, 60, 0)"}}),u.a.createElement("span",null,this.state.loggedOutMessage===M.e.OLD?"Heads up: you\u2019ll need to sign in to keep raising money for great causes!":"You\u2019re almost there! Sign in to start raising money for great causes."))):null,u.a.createElement(j.d,null,u.a.createElement(j.b,{exact:!0,path:"/newtab/auth/verify-email/",render:function(e){return u.a.createElement(K,Object.assign({},e,{user:n,app:r}))}}),u.a.createElement(j.b,{exact:!0,path:"/newtab/auth/username/",render:function(t){return u.a.createElement(Z.a,Object.assign({},t,{user:n,app:r,onCompleted:e.onAuthProcessCompleted.bind(e)}))}}),u.a.createElement(j.b,{exact:!0,path:"/newtab/auth/welcome/",render:function(e){return u.a.createElement(z,Object.assign({},e,{user:n,app:r}))}}),u.a.createElement(j.b,{exact:!0,path:"/newtab/auth/missing-email/",component:_}),u.a.createElement(j.b,{path:"/newtab/auth/",render:function(t){return u.a.createElement(L,Object.assign({},t,{onSignInSuccess:e.onSignInSuccess.bind(e),user:n,app:r}))}}))),o?null:u.a.createElement("span",{"data-test-id":"endorsement-quote",style:{color:"rgba(33, 33, 33, 0.82)",fontFamily:"'Helvetica Neue','Helvetica','Arial',sans-serif",fontWeight:"500",lineHeight:"1.1",textAlign:"center",padding:10}},u.a.createElement("h1",null,'"One of the simplest ways to raise money"'),u.a.createElement("p",{style:{color:"#838383",fontWeight:"400"}},"- USA Today"))),o?u.a.createElement("div",{"data-test-id":"anon-sign-in-fyi",style:{position:"absolute",left:"50%",transform:"translateX(-50%)",bottom:24}},u.a.createElement(b.a,{elevation:1},u.a.createElement("div",{style:{padding:"14px 18px",maxWidth:600}},u.a.createElement(k.a,{variant:"body2",style:{fontWeight:"bold"}},"Hey there!"),u.a.createElement(k.a,{variant:"body2"},"We ask you to sign in after a while so you don't lose access to your notes, bookmarks, and Hearts (even if you drop your computer in a puddle). Signing in also lets you sync your tab between browsers \u2013 nice!")))):null,n?u.a.createElement(ie.a,{user:n,isNewUser:!0}):null))}}]),t}(u.a.Component),me=Object(m.createFragmentContainer)(de,{user:function(){return n(1567)}}),pe=n(575),ge=function(e){function t(){return Object(a.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props.authUser,a=t&&t.id?t.id:null;return u.a.createElement(d.a,{query:a?J||(J=function(){return n(1568)}):void 0,variables:a?{userId:a}:{},render:function(t){var n=t.error,a=t.props,r=t.retry;if(n&&Object(c.get)(n,"source.errors")&&F.a.error(n),!a)return null;var i=a.user||null,s=r||function(){};return u.a.createElement(me,Object.assign({user:i,fetchUser:s},e.props))}})}}]),t}(u.a.Component);ge.defaultProps={};t.default=Object(pe.a)({renderIfNoUser:!0,redirectToAuthIfIncomplete:!1})(ge)}}]);
//# sourceMappingURL=15.41419c2d.chunk.js.map